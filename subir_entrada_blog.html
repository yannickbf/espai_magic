<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subir entrada de blog a Espai Màgic</title>
</head>
<script>

    //Lista de las entradas del Blog del Json
    var listaEntradasBlog;

    //Funcion para cargar Json
    var xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = function () {
        if (this.readyState == 4 && this.status == 200) {
            listaEntradasBlog = JSON.parse(this.responseText);
        }
    };
    xmlhttp.open("GET", "entradas_blogs.txt", true);
    xmlhttp.send();

    //const arrayObj = [{"id":1,"fecha":"2012/04/30 10:14:23","titulo":"entrada1","descripcion":"entrada1 descripcion"},{"id":2,"fecha":"2020/09/22 16:28:23","titulo":"entrada2","descripcion":"entrada2 descripcion"}];
    const arrayObj = listaEntradasBlog;

    for (var i = 0; i < arrayObj.length; i++) {
        alert(
            "Id: " + arrayObj[i].id +
            "\nFecha: " + arrayObj[i].fecha +
            "\nTitulo: " + arrayObj[i].titulo +
            "\nDescripcion: " + arrayObj[i].descripcion
        );
    }

    //Funcion para generar objeto con titulo y cuerpo
    function generarObjEntradaBlog() {
        var entradaBlog = new Object();
        entradaBlog.titulo = document.getElementById("titulo").value;
        entradaBlog.cuerpo = document.getElementById("cuerpo").value;
        return entradaBlog;
    }

    function generarJsonEntradaBlog() {

    }

    //Aqui controlamos que se hayan introducido los datos, devuelve "" si se han introducido los 2 datos, de lo contrario devuelve un string con los fallos
    function controlDeDatos() {
        var strErrores = "";

        //Si no han introducido el titulo sera error
        if (document.getElementById("titulo").value == "") {
            strErrores += "Titulo no introducido\n";
        }

        if (document.getElementById("cuerpo").value == "") {
            strErrores += "Cuerpo no introducido\n";
        }

        return strErrores;
    }

    //Funcion para añadir entrada
    function anadirEntrada() {
        alert(llistatHotels);

        var datosCompletados = controlDeDatos();
        if (datosCompletados == "") {

        }
        else {
            alert("Faltan datos por completar:\n" + datosCompletados);
        }
    }

</script>

<body>
    <div>
        <label>Titulo:</label>
        <input type="text" id="titulo" />
    </div>
    <div>
        <br>
        <lavel>Cuerpo:</lavel><br>
        <textarea id="cuerpo" rows="10" cols="50"></textarea><br>
        <button id="anadir" onclick="anadirEntrada()">Añadir</button>
    </div>
</body>

</html>